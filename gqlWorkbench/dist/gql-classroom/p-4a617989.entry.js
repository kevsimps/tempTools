import{r as e,h as t}from"./p-927dfcde.js";const a=".frame{position:absolute;z-index:5;height:25vh;background:#ccc;left:20%;top:50%;padding:2em}h1{text-align:center}.hidden{display:none}";const i=a;const s=class{constructor(t){e(this,t);this.token=undefined;this.expStamp=undefined;this.hide=true;this.callbackUrl=undefined}async burp(e){console.log(e);const t=e.slice(e.search("=")+1,e.search("&"));let a=new Headers;a.append("Content-Type","application/x-www-form-urlencoded");let i=new URLSearchParams;i.append("grant_type","authorization_code");i.append("redirect_uri",this.callbackUrl);i.append("client_id","C1b249680a1788a109f1cd53c578c874a28a3e6468929598d4552d17d0a12f32f");i.append("client_secret","49aad1cd3ed0758755c69d818baf897923876854423dbc01d608fc8255d14044");i.append("code",t);let s={method:"POST",headers:a,body:i};let c=await fetch("https://webexapis.com/v1/access_token",s);let d=await c.json();this.token="Bearer "+d.access_token;this.expStamp=new Date(Date.now()+d.expires_in*1e3);sessionStorage.setItem("token",this.token);sessionStorage.setItem("expStamp",this.expStamp);this.hide=false}onGetAuth(){if(+new Date(sessionStorage.getItem("expStamp"))>Date.now()){this.token=sessionStorage.getItem("token");this.hide=false}else{window.open(`https://webexapis.com/v1/authorize?response_type=code&client_id=C1b249680a1788a109f1cd53c578c874a28a3e6468929598d4552d17d0a12f32f&state=new&scope=cjp%3Aconfig%20cjp%3Aconfig_read%20cjp%3Aconfig_write&redirect_uri=${this.callbackUrl}`,"steve","popup")}}render(){let e=`{\n            "headers":{\n            "Authorization":"${this.token}"\n            }\n        }`;return[t("div",{key:"c98637edf2bb946730bbabca6668470f4dbbe742",class:"frame"+(this.hide?" hidden":"")},t("h1",{key:"c996f9dfba2122296ce6da43036ad63a2b4289b5"},"Copy this text into your Global Environment Variable"),t("p",{key:"6896c243d64f9504ac53ce5ccff20eac27d0f199"},e),t("button",{key:"de4bfa82b0a90ee6bd338a4118cbdf52d1df3d9d",onClick:()=>{this.hide=!this.hide}},"close"))]}};s.style=i;export{s as wxcc_auth_widget};
//# sourceMappingURL=p-4a617989.entry.js.map