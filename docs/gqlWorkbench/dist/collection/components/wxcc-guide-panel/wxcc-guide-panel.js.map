{"version":3,"file":"wxcc-guide-panel.js","sourceRoot":"","sources":["../../../src/components/wxcc-guide-panel/wxcc-guide-panel.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Prop, State, h, Listen } from \"@stencil/core\";\r\n\r\n@Component({\r\n  tag: \"wxcc-guide-panel\",\r\n  styleUrl: \"wxcc-guide-panel.css\",\r\n  shadow: true\r\n\r\n})\r\nexport class SideDrawer {\r\n  @State() showNav = false;\r\n  @Prop({ reflect: true }) arttitle: string;\r\n  @Prop({ reflect: true, mutable: true }) opened: boolean;\r\n  @Prop({ reflect: true, mutable: true }) flip: boolean;\r\n  @State() content\r\n  @State() lessons: { title: string, url: string }[] = []\r\n  @State() currentPage\r\n  @Prop({ reflect: true }) lList: string;\r\n  @State() lastScroll = 0;\r\n\r\n  async componentWillLoad() {\r\n\r\n    const response = await fetch(this.lList)\r\n    // sessionStorage.setItem(\"lessons\", await response.text())\r\n    const lessons = await response.json()\r\n    this.lessons = await lessons.map(match => {\r\n      return { title: match[\"title\"], url: match[\"address\"] }\r\n\r\n    })\r\n\r\n  }\r\n\r\n\r\n  // onCloseDrawer(){\r\n  //     this.opened=false;\r\n  // }\r\n  onContentChange(content: string) {\r\n    this.showNav = content === \"nav\"\r\n    // console.log(content)\r\n  }\r\n  // @Method()\r\n  // async open(){\r\n  //   this.opened=true \r\n  // }\r\n\r\n  @Listen('toggleGuide', { target: \"body\" })\r\n  onToggle(event: CustomEvent) {\r\n    console.log(event.detail)\r\n    this.opened = !this.opened\r\n  }\r\n\r\n  @Listen('wxccGuidePageTurn', { target: \"body\" })\r\n  onNext(event: CustomEvent) {\r\n    //  console.log(event.detail)\r\n    let url\r\n    const iHere = this.lessons.findIndex(x => x.title === this.currentPage)\r\n    if (!iHere) {\r\n      this.currentPage = this.lessons[0].title\r\n    }\r\n    //  console.log(this.currentPage)\r\n    //  console.log(iHere)\r\n    // this.currentPage = this.lessons[iHere + 1].title\r\n    if (event.detail === \"next\") {\r\n      url = this.lessons[iHere + 1].url\r\n      this.currentPage = this.lessons[iHere + 1].title\r\n      this.lastScroll = document.querySelector(\"wxcc-guide-panel\").shadowRoot.querySelector(\"aside\").scrollTop\r\n      document.querySelector(\"wxcc-guide-panel\").shadowRoot.querySelector(\"aside\").scrollTop = 0\r\n    } else {\r\n      url = this.lessons[iHere - 1].url\r\n      this.currentPage = this.lessons[iHere - 1].title\r\n      document.querySelector(\"wxcc-guide-panel\").shadowRoot.querySelector(\"aside\").scrollTop = this.lastScroll\r\n    }\r\n    this.getHTML(url)\r\n      .then(html => {\r\n        if (html !== null) {\r\n          this.content = html\r\n          this.content = <div innerHTML={this.content}></div>\r\n          // console.log(html);\r\n\r\n        }\r\n      });\r\n      this.showNav = false\r\n  }\r\n\r\n  onChoice(url) {\r\n    this.getHTML(url)\r\n      .then(html => {\r\n        if (html !== null) {\r\n          this.content = html\r\n          this.content = <div innerHTML={this.content}></div>\r\n          this.currentPage = this.lessons[this.lessons.findIndex(x => x.url === url)].title\r\n          this.showNav = false\r\n        }\r\n      })\r\n  }\r\n\r\n  async getHTML(url) {\r\n    try {\r\n      const response = await fetch(url);\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! Status: ${response.status}`);\r\n      }\r\n\r\n      const html = await response.text();\r\n      return html;\r\n    } catch (error) {\r\n      console.error(\"Error during fetch:\", error);\r\n      return null;\r\n    }\r\n  }\r\n componentDidUpdate(){\r\n  \r\n    Array.from(document.querySelector(\"wxcc-guide-panel\").shadowRoot.querySelectorAll(\"textarea\")).forEach((element:any) => {element.value = element.value.replaceAll(\"\\\\\",\"\")});\r\n    // document.querySelector(\"wxcc-guide-panel\").shadowRoot.querySelector(\"aside\").scrollTop=0 \r\n    // Remove style css from jekyll site\r\n    document.querySelector(\"wxcc-guide-panel\").shadowRoot.querySelector(\"link[rel=stylesheet]\").remove()\r\n\r\n }\r\n  render() {\r\n    const fIcon = <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path d=\"M32 96l320 0V32c0-12.9 7.8-24.6 19.8-29.6s25.7-2.2 34.9 6.9l96 96c6 6 9.4 14.1 9.4 22.6s-3.4 16.6-9.4 22.6l-96 96c-9.2 9.2-22.9 11.9-34.9 6.9s-19.8-16.6-19.8-29.6V160L32 160c-17.7 0-32-14.3-32-32s14.3-32 32-32zM480 352c17.7 0 32 14.3 32 32s-14.3 32-32 32H160v64c0 12.9-7.8 24.6-19.8 29.6s-25.7 2.2-34.9-6.9l-96-96c-6-6-9.4-14.1-9.4-22.6s3.4-16.6 9.4-22.6l96-96c9.2-9.2 22.9-11.9 34.9-6.9s19.8 16.6 19.8 29.6l0 64H480z\"/></svg>\r\n    let mainContent = this.content || <slot />;\r\n    if (this.showNav) {\r\n      mainContent = <ul class=\"nav\">{this.lessons.map(lesson => (\r\n        <li class=\"nav\" onClick={this.onChoice.bind(this, lesson.url)}><strong>{lesson.title}</strong></li>\r\n      ))}</ul>\r\n    }\r\n\r\n\r\n    return [\r\n      // <div class=\"backdrop\" onClick={this.onCloseDrawer.bind(this)}/>,\r\n      <aside >\r\n        <header>\r\n          <h1 class=\"post-title\">{this.currentPage || this.arttitle} <span class=\"flipper\" onClick={()=>this.flip = !this.flip} >{fIcon}</span></h1>\r\n          {/* <button onClick={this.onCloseDrawer.bind(this)}>X</button> */}\r\n        </header>\r\n\r\n        <section id=\"tabs\">\r\n          <button class={!this.showNav ? \"active\" : \"\"} onClick={this.onContentChange.bind(this, \"lesson\")}>Lesson</button>\r\n          <button class={this.showNav ? \"active\" : \"\"} onClick={this.onContentChange.bind(this, \"nav\")}>Navigation</button>\r\n        </section>\r\n        <main>\r\n          {mainContent}\r\n        </main>\r\n      </aside >\r\n    ];\r\n  }\r\n}\r\n"]}