{"file":"wxcc-auth-widget.js","mappings":"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","names":["__stencil_proxyCustomElement"],"sources":["src/components/wxcc-auth-widget/wxcc-auth-widget.css?tag=wxcc-auth-widget&encapsulation=shadow","src/components/wxcc-auth-widget/wxcc-auth-widget.tsx"],"sourcesContent":[".frame{\r\n    position: absolute;\r\n    z-index: 5;\r\n    height:25vh;\r\n    background: #ccc;\r\n    left:20%;\r\n    top:50%;\r\n    padding: 2em;\r\n    border-radius: 30px;\r\n}\r\nh1{\r\n    text-align: center;\r\n}\r\n.hidden{\r\n    display: none;\r\n}\r\nbutton{\r\n    cursor: pointer;\r\n    border-radius: 30px;\r\n    padding: 14px 28px;\r\n    margin: 15px;\r\n    width: 20%;\r\n    font-size: medium;\r\n}","import { Component, h, Method, State, Listen, Prop } from \"@stencil/core\";\r\n\r\n@Component({\r\n    tag: \"wxcc-auth-widget\",\r\n    styleUrl: \"wxcc-auth-widget.css\",\r\n    shadow: true\r\n})\r\n\r\nexport class wxccAuth {\r\n\r\n    @State() token\r\n    @State() expStamp\r\n    @State() hide = true\r\n    @Prop() callbackUrl: string\r\n\r\n    @Method()\r\n    async burp(x) {\r\n        console.log(x)\r\n        const code = x.slice(x.search(\"=\") + 1, x.search(\"&\"))\r\n        // console.log(code)\r\n        let myHeaders = new Headers();\r\n        myHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n        let urlencoded = new URLSearchParams();\r\n        urlencoded.append(\"grant_type\", \"authorization_code\")\r\n        urlencoded.append(\"redirect_uri\", this.callbackUrl)\r\n        urlencoded.append(\"client_id\", \"C1b249680a1788a109f1cd53c578c874a28a3e6468929598d4552d17d0a12f32f\")\r\n        urlencoded.append(\"client_secret\", \"49aad1cd3ed0758755c69d818baf897923876854423dbc01d608fc8255d14044\")\r\n        urlencoded.append(\"code\", code)\r\n        let requestOptions = {\r\n            method: 'POST',\r\n            headers: myHeaders,\r\n            body: urlencoded\r\n        };\r\n        // console.log(urlencoded.toString())\r\n        let response = await fetch(\"https://webexapis.com/v1/access_token\", requestOptions)\r\n        let deets = await response.json()\r\n        // console.log(deets)\r\n        this.token = \"Bearer \" + deets.access_token\r\n        this.expStamp = new Date(Date.now() + (deets.expires_in * 1000))\r\n        sessionStorage.setItem(\"token\", this.token)\r\n        sessionStorage.setItem(\"expStamp\", this.expStamp)\r\n        // console.log(this.token)\r\n        // console.log(this.expStamp)\r\n        this.hide = false\r\n\r\n\r\n    }\r\n    @Listen('wxccAuthPop', { target: \"body\" })\r\n    onGetAuth() {\r\n        if(+new Date(sessionStorage.getItem(\"expStamp\")) > Date.now() ){\r\n            this.token = sessionStorage.getItem(\"token\")\r\n            this.hide = false\r\n        }\r\n        else{\r\n        window.open(`https://webexapis.com/v1/authorize?response_type=code&client_id=C1b249680a1788a109f1cd53c578c874a28a3e6468929598d4552d17d0a12f32f&state=new&scope=cjp%3Aconfig%20cjp%3Aconfig_read%20cjp%3Aconfig_write&redirect_uri=${this.callbackUrl}`, \"steve\", \"popup\")\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        let tok =`{\r\n            \"headers\":{\r\n            \"Authorization\":\"${this.token}\"\r\n            }\r\n        }`\r\n\r\n        return [\r\n            <div class={\"frame\" + (this.hide ? \" hidden\" : \"\")}>\r\n                <h1>Copy this text into your Global Environment Variable</h1>\r\n                <p>\r\n                    {tok}\r\n                </p>\r\n                <br></br>\r\n               <center> \r\n                <button onClick={()=>{navigator.clipboard.writeText(tok)}}>Copy</button>\r\n                <button onClick={()=>{this.hide = !this.hide}}>Close</button>\r\n                </center>\r\n                {/* <button onClick={this.onGetAuth.bind(this)}>{this.expStamp>Date.now() ? `Auth good until ${this.expStamp}`:\"Launch Auth\"}</button> */}\r\n            </div>\r\n        ]\r\n    }\r\n}"],"version":3}